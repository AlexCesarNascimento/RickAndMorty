(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["PinBetterSaveCommon",14,52,150],{"+c4W":function(e,t,n){var o=n("711d"),i=n("4/ic"),r=n("9ggG"),a=n("9Nap");e.exports=function(e){return r(e)?o(a(e)):i(e)}},"0YPa":function(e,t,n){var o=n("q1tI");t.a=(e,t)=>{const n=Object(o.useRef)(()=>{});Object(o.useEffect)(()=>{n.current=e},[e]),Object(o.useEffect)(()=>{if(null===t)return()=>{};const e=setInterval(()=>n.current(),t);return()=>clearInterval(e)},[t])}},"0zyx":function(e,t,n){n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var o=n("mVx/"),i=n.n(o);const r=({pathname:e})=>/^\/pin\/[\w-]+\/?$/.test(e),a=e=>{const t=i()(e,e=>!r(e));return t&&(({pathname:e})=>/^\/search\/pins\//.test(e))(t)?(({pathname:e,search:t})=>{const n=/^\/search\/pins\/(\?.*)$/.exec(e),o=(t||n&&n[1]||"").substr(1).split("&").map(e=>e.split("=")).find(e=>"q"===e[0]);return o?decodeURIComponent(o[1]):""})(t):""}},"1vym":function(e,t,n){},"3/Bf":function(e,t,n){n.d(t,"a",(function(){return d})),n.d(t,"f",(function(){return u})),n.d(t,"g",(function(){return p})),n.d(t,"e",(function(){return f})),n.d(t,"c",(function(){return h})),n.d(t,"b",(function(){return m})),n.d(t,"d",(function(){return g}));var o=n("7w6Q"),i=n("FZ8N"),r=n("LrH5");const a=Object(r.a)("logPwtStats");let s=null;const l=o.a.getSampleRate(.2);let c=!0;const d=e=>{s=e},u=e=>{s&&(s.historyAction=e)},p=e=>{s&&(s.initialAppLoadSurface=e)},f=(e,t)=>{if(!s)return void o.a.increment("performanceEntries.no_context",l,{name:e});const{deviceType:n,initialAppLoadSurface:r,isBot:a,isSocialBot:c}=s;if(!r)return void o.a.increment("performanceEntries.no_surface",l,{name:e});const d=`performanceEntries.${(c?"socialBot":a&&"bot")||"nonbot"}.${n}.${r}.${e}`;i.c||o.a.timing(d,t,l)},h=(e,t)=>{if(!s)return a("pwt.metrics_quality.no_context"),void o.a.increment("pwt.metrics_quality.no_context",l,{eventName:e});const{browserName:n,browserVersion:r,deviceType:c,isBot:d,isSocialBot:u}=s,p=`pwt.${(u?"socialBot":d&&"bot")||"nonbot"}.metrics_quality.${c}.${e}`,f={...(null==t?void 0:t.tags)||{},browserName:n,browserVersion:(null==r?void 0:r.split(".")[0])||"0"},h=null==t?void 0:t.count;a(`${p}: ${"number"==typeof h?h:1}`),(null==t?void 0:t.tags)&&a(Object.entries(t.tags)),i.c||o.a.count(p,"number"==typeof h?h:1,l,f)},m=(e,t)=>h(`ERROR.${(null==t?void 0:t.action)?t.action+".":""}${e}`,{tags:t}),g=({appLoadName:e,clientNavName:t},n)=>{if(s){const o="APP_VOLUME.";c?(h(o.concat(e),{tags:{browserSupportsPwtProfiler:!!n}}),c=!1):"PUSH"===s.historyAction&&h(o.concat(t),{tags:{browserSupportsPwtProfiler:!!n}})}else o.a.increment("pwt.metrics_quality.no_context",l,{eventName:e.concat("."+t)})}},"4/ic":function(e,t,n){var o=n("ZWtO");e.exports=function(e){return function(t){return o(t,e)}}},"711d":function(e,t){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},CMye:function(e,t,n){var o=n("GoyQ");e.exports=function(e){return e==e&&!o(e)}},EuRG:function(e,t,n){function o(e,t){return{type:"SEARCH_PIN_CLOSEUP_VIEWED",payload:{pinId:e,query:t}}}function i(e){return{type:"SEARCH_QUERY_STARTED",payload:{query:e}}}function r(e){return{type:"SEARCH_QUERY_INVALIDATED",payload:{query:e}}}n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return r}))},FZ8N:function(e,t,n){n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return r}));const o=window.location.search.includes("debug_tracing"),i=window.location.search.includes("debug_lab_tracing"),r=o||i},FylZ:function(e,t,n){function o(){let e="";for(let t=0;t<16;t+=1){e+="0123456789abcdef"[Math.floor(16*Math.random())]}return e}n.d(t,"a",(function(){return o}))},GDhZ:function(e,t,n){var o=n("wF/u"),i=n("mwIZ"),r=n("hgQt"),a=n("9ggG"),s=n("CMye"),l=n("IOzZ"),c=n("9Nap");e.exports=function(e,t){return a(e)&&s(t)?l(c(e),t):function(n){var a=i(n,e);return void 0===a&&a===t?r(n,e):o(t,a,3)}}},"H/Lk":function(e,t,n){n.d(t,"a",(function(){return o}));const o=(e,t,n)=>({type:"MOST_RECENT_BOARD",payload:{id:e,name:t,url:n}})},HMdf:function(e,t,n){n.d(t,"f",(function(){return d})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return p})),n.d(t,"e",(function(){return f})),n.d(t,"b",(function(){return h})),n.d(t,"d",(function(){return m}));var o=n("vzKb"),i=n("SyXB");function r(e){var t,n;return(null===(t=window)||void 0===t||null===(n=t.performance)||void 0===n?void 0:n.getEntriesByType)&&window.performance.getEntriesByType(e)||[]}var a=n("FZ8N"),s=n("3/Bf");let l;function c(){window.performance&&window.performance.clearResourceTimings&&(Object(i.c)("resourceBufferCleared"),a.b&&console.info("Warning: Clearing resource timings in default buffer."),Object(s.c)("resourceBufferSize",{count:r("resource").length}),window.performance.clearResourceTimings())}const d=({size:e})=>{if(window.performance){window.PerformanceObserver?(l=r("resource"),Object(o.a)({entryTypes:["resource"]},t=>{l=(l||[]).concat(t.getEntries()),l.length>e&&(l=l.slice(-e))})):(window.addEventListener("popstate",()=>{r("resource").length>e&&c()}),window.performance.setResourceTimingBufferSize&&window.performance.setResourceTimingBufferSize(e));try{window.performance.onresourcetimingbufferfull=()=>{l||c()}}catch(t){}}},u=()=>l||r("resource"),p=()=>{l&&(Object(s.c)("customBufferSize",{count:l.length}),l=[]),c()},f=()=>({customBufferSize:l?l.length:0,defaultBufferSize:r("resource").length}),h=(e,t=!0)=>{let n=0,o=0;const i=(r=e.filter(e=>t?(e.responseEnd||"img"!==e.initiatorType||(n+=1),e.transferSize||"img"!==e.initiatorType||(o+=1),!!e.responseEnd&&!!e.transferSize&&"img"===e.initiatorType):!!e.responseEnd&&!!e.transferSize).map(e=>8*(e.transferSize||0)/((e.responseEnd-e.responseStart)/1e3)/1e3)).length?r.reduce((e,t)=>e+t,0)/r.length:null;var r;return t&&(n>0&&Object(s.c)("images.downloadSpeed.noResponseEnd",{tags:{count:n}}),o>0&&Object(s.c)("images.downloadSpeed.transferSize",{tags:{count:o}})),i},m=()=>(e=>{if(!e)return"unknown";const t=Math.floor(e/1e3);return t<1?"0-1":t<5?"1-5":t<10?"5-10":t<20?"10-20":t<40?"20-40":t<80?"40-80":"80_or_above"})(h(u()))},IOzZ:function(e,t){e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},JELi:function(e,t,n){var o=n("KwMD"),i=n("ut/Y"),r=n("Sxd8"),a=Math.max,s=Math.min;e.exports=function(e,t,n){var l=null==e?0:e.length;if(!l)return-1;var c=l-1;return void 0!==n&&(c=r(n),c=n<0?a(l+c,0):s(c,l-1)),o(e,i(t,3),c,!0)}},JKZO:function(e,t,n){var o=n("q1tI"),i=n.n(o),r=n("nokP"),a=n.n(r),s=n("yeYm"),l=n.n(s),c=n("clxp"),d=n("Cufx"),u=n("Ye/N"),p=n("n6mq");var f=e=>{const{id:t,isFocused:n,onMouseDown:o,onMouseEnter:r,onMouseUp:a,mention:s,role:l,searchValue:c}=e;return i.a.createElement("div",{id:t,onMouseDown:o,onMouseEnter:r,onMouseUp:a,searchvalue:c,role:l},i.a.createElement(p.d,{display:"flex",alignItems:"center",color:n?"lightGray":"transparent",rounding:4,dangerouslySetInlineStyle:{__style:{cursor:"pointer"}}},i.a.createElement(p.d,{padding:1},i.a.createElement(d.a,{accessibilityLabel:"",name:s.full_name,size:"sm",src:s.image_medium_url,verified:s.verified_identity&&s.verified_identity.verified})),i.a.createElement(p.d,{marginStart:2,marginEnd:2,overflow:"hidden"},i.a.createElement(p.U,{truncate:!0,weight:"bold",color:"darkGray"},s.full_name),i.a.createElement(p.d,{dangerouslySetInlineStyle:{__style:{whiteSpace:"nowrap"}}},i.a.createElement(p.U,{size:"sm",color:"darkGray"},s.username,s.explicitly_followed_by_me&&" â€¢ "+u.a._("Following","mentions.mentionsFlyout.following","Label to tell the user that they are viewing a user they follow"))))))},h=n("eOdZ"),m=n("vxan"),g=n("aAE7"),v=n.n(g),b=n("v83y"),y=n("TiQD");const S=({decoratorRect:e,popover:t,state:n,props:o,...i})=>{const r=(e.x||e.left)+t.offsetWidth,{top:a,left:s}=v()({decoratorRect:e,popover:t,state:n,props:o});let l=null;r>window.innerWidth&&(l=parseFloat(s)-r%window.innerWidth+"px");return{display:"block",top:parseFloat(a)+5+"px",left:l||s,zIndex:new p.l([y.a]).index()}},_=e=>i.a.createElement(p.U,{inline:!0,color:"blue",weight:"bold"},e.children);t.a=Object(m.a)(({focusOnMount:e,initialMentions:t=[],initialText:n="",instanceId:r,maxSuggestions:s=5,makeCancelablePromise:d,onAddMention:u,onBlur:m,onChange:g,onFocus:v,onSearchMentionCancel:y,onSuggestionsPopoverClose:w,onSuggestionsPopoverOpen:C,placeholder:O,readOnly:E,spellCheck:T})=>{const I=Object(o.useRef)(null),[B,x]=Object(o.useState)(!1),[k,R]=Object(o.useState)(!1),[j,P]=Object(o.useState)([]),[{plugins:D,MentionSuggestions:F}]=Object(o.useState)(()=>(()=>{const e=a()({entityMutability:"IMMUTABLE",mentionComponent:_,mentionPrefix:"@",mentionTrigger:"@",positionSuggestions:S,supportWhitespace:!1}),{MentionSuggestions:t}=e;return{plugins:[e],MentionSuggestions:t}})()),[M,N]=Object(o.useState)();Object(o.useEffect)(()=>{N(b.EditorState.createWithContent((({text:e,mentions:t})=>{const n=[],o={},i=[];return t&&t.forEach((e,t)=>{const{length:n,offset:r,object_id:a}=e;o[t]={data:{mention:{id:a}},mutability:"IMMUTABLE",type:"mention"},i.push({key:t,length:n,offset:r})}),n.push({text:e,key:null,depth:null,inlineStyleRanges:null,type:"unstyled",entityRanges:i}),Object(b.convertFromRaw)({entityMap:o,blocks:n})})({text:n,mentions:t})))},[r]),Object(o.useEffect)(()=>{x(!0)},[]),Object(o.useEffect)(()=>{e&&I.current&&setTimeout(I.current.focus,50)},[B]);const A=Object(o.useCallback)(e=>{P([]),u&&u(e)},[]),U=Object(o.useCallback)(e=>{m&&m(e)},[]),L=Object(o.useCallback)(e=>{const t=e.getCurrentContent(),n=t.getPlainText(""),o=(e=>{const t=[];let n=0;return e.getBlocksAsArray().forEach((o,i)=>{let r=null;o.findEntityRanges(t=>{const n=t.getEntity();if(!n)return!1;const o=e.getEntity(n);return"mention"===o.getType()&&(r=o.data.mention,!0)},(e,o)=>{r&&t.push({object_id:r.id,offset:n+e,length:o-e,tag_type:1})}),n+=1+o.getLength()}),t})(t);N(e),g({text:n,mentions:o})},[]),H=Object(o.useCallback)(e=>{v&&v(e)},[]),G=Object(o.useCallback)(()=>{R(!1),w&&w()},[]),W=Object(o.useCallback)(()=>{R(!0),C&&C()},[]),z=Object(o.useCallback)((e,t)=>{if(y&&" "===e&&k&&y(),j.length>0)return"not-handled";const n=t.getCurrentContent(),o=t.getSelection();return L(b.EditorState.push(t,b.Modifier.replaceText(n,o,e),"adjust-depth")),"handled"},[j]),q=Object(o.useCallback)(({value:e})=>{d(h.a.create("UserMentionTypeaheadResource",{query:e,num_people:s}).callGet(),"userMentionTypeahead").then(e=>{const t=(({suggestions:e})=>e.map(e=>({...e,name:e.username})))({suggestions:e.resource_response.data});P(t)}).catch(()=>{})},[]);return i.a.createElement(c.a,{name:"EditorWithMentions"},B&&i.a.createElement(p.d,{"data-test-id":"editor-with-mentions",width:"100%"},i.a.createElement(l.a,{editorState:M,onBlur:U,onChange:L,onFocus:H,handleBeforeInput:z,placeholder:O,plugins:D,readOnly:E,ref:I,spellCheck:T,stripPastedStyles:!0}),i.a.createElement(F,{onAddMention:A,onClose:G,onOpen:W,onSearchChange:q,suggestions:j,entryComponent:f})))})},KwMD:function(e,t){e.exports=function(e,t,n,o){for(var i=e.length,r=n+(o?1:-1);o?r--:++r<i;)if(t(e[r],r,e))return r;return-1}},LrH5:function(e,t,n){n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r}));var o=n("FZ8N");const i=(e,t)=>{o.b&&e instanceof HTMLImageElement&&(e.style.outline="10px solid "+t,e.style.outlineOffset="-30px")},r=e=>(t,...n)=>{o.b&&console.log("string"==typeof t?`[PWT:${e}] ${t}`:t,...n)}},MNxV:function(e,t,n){n.d(t,"a",(function(){return s}));var o=n("q1tI"),i=n.n(o),r=n("XRfM"),a=n("pLLR");const s=r.b.DateFormatType;t.b=({dateFormatType:e,useUTC:t=!0,value:n})=>i.a.createElement(a.b,null,o=>r.b.formatDate(o.locale,n,e,t))},O7RO:function(e,t,n){var o=n("CMye"),i=n("7GkX");e.exports=function(e){for(var t=i(e),n=t.length;n--;){var r=t[n],a=e[r];t[n]=[r,a,o(a)]}return t}},Sxd8:function(e,t,n){var o=n("ZCgT");e.exports=function(e){var t=o(e),n=t%1;return t==t?n?t-n:t:0}},SyXB:function(e,t,n){n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return c})),n.d(t,"b",(function(){return d}));var o=n("XtwW");const i="masonryPagination";let r={};const a=e=>"ðŸ“Œ "+e,s=()=>{const e={};return Object.keys(r).forEach(t=>{(r[t]||[]).slice(0,3).forEach((n,o)=>{e[o?`${t}_${o+1}`:t]=n})}),e},l=(e,t)=>(r[e]||[]).filter(e=>e<t).length,c=(e,t)=>l(e,t)>0,d=()=>{o.a&&Object.keys(r).forEach(e=>((e,t)=>{const n=a(t);e.clearMarks(n),e.clearMeasures(n)})(o.a,e)),r={}};t.c=e=>{o.a&&(r[e]=(r[e]||[]).concat([o.a.now()]),((e,t)=>{const n=a(t);e.mark(n),e.measure(n)})(o.a,e))}},WnNx:function(e,t,n){function o(e){return{type:"SHOW_REPIN_ANIMATION",payload:{pinId:e}}}function i(){return{type:"HIDE_REPIN_ANIMATION"}}n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}))},XKAG:function(e,t,n){var o=n("ut/Y"),i=n("MMmD"),r=n("7GkX");e.exports=function(e){return function(t,n,a){var s=Object(t);if(!i(t)){var l=o(n,3);t=r(t),n=function(e){return l(s[e],e,s)}}var c=e(t,n,a);return c>-1?s[l?t[c]:c]:void 0}}},XtwW:function(e,t,n){var o;t.a=(o=window.performance)&&o.clearMarks&&o.clearMeasures&&o.clearResourceTimings&&o.getEntries&&o.getEntriesByName&&o.getEntriesByType&&o.mark&&o.measure&&o.now&&o.setResourceTimingBufferSize?o:null},ZCgT:function(e,t,n){var o=n("tLB3"),i=1/0;e.exports=function(e){return e?(e=o(e))===i||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},ZCpW:function(e,t,n){var o=n("lm/5"),i=n("O7RO"),r=n("IOzZ");e.exports=function(e){var t=i(e);return 1==t.length&&t[0][2]?r(t[0][0],t[0][1]):function(n){return n===e||o(n,e,t)}}},ZVWG:function(e,t,n){n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return l}));var o=n("etmJ");const i=(e,t)=>{const n=/^\d{1,3}\.\d{1,3}(?:\.\d{1,6})?$/;if(!e.match(n)||!t.match(n))return null;const o=e.split("."),i=t.split("."),r=Math.max(o.length,i.length);for(let a=0;a<r;a+=1){const e=a<o.length?parseInt(o[a],10):0,t=a<i.length?parseInt(i[a],10):0;if(e<t)return-1;if(e>t)return 1}return 0},r=e=>({defaultStyle:0,fontFamily:e.name,fontGroup:o.c,fontOverrides:{letterSpacing:e.letter_spacing,lineHeight:e.line_height},format:"truetype",id:e.id,styles:[{fontStyle:"",fontUrl:e.url,fontWeight:"normal",name:"normal"}]});function a(e){const t=[];let n="";for(const o of e)if(n){const e=!!o.match(/\s/),i=!!n.match(/\s/);if(e===i)n+=o;else if(!i&&n.includes("-")){let e=0;for(let o=0;o<n.length;o+=1)"-"===n[o]&&(t.push(n.substring(e,o+1)),e=o+1);t.push(n.substring(e)),n=o}else t.push(n),n=o}else n=o;return n.length&&t.push(n),t}function s({font:e,fontSize:t,textList:n,width:o}){var i,r;if("undefined"==typeof document||!document.body||o<=0||t<=0)return[];const s=document.body,l=document.createElement("div");s.appendChild(l);const c=null!=(null===(i=e.fontOverrides)||void 0===i?void 0:i.letterSpacing)?e.fontOverrides.letterSpacing+"px":void 0,d=(null===(r=e.fontOverrides)||void 0===r?void 0:r.lineHeight)||1.1,u={letterSpacing:c,lineHeight:String(d),fontFamily:e.fontFamily,fontSize:t+"px",visibility:"hidden"};Object.assign(l.style,u);const p=document.createElement("div");p.style.display="inline",l.appendChild(p);const f=document.createTextNode("");p.appendChild(f);const h=[];let m="";const g=e=>{const t=e.trim();return f.textContent=t,{text:t,width:p.offsetWidth}},v=e=>{const t=!!e.match(/\s/),n=0===m.length;if(f.textContent=`${m}${e}`,p.offsetWidth>o)if(t)h.push(g(m)),m="";else if(n)for(const o of e)v(o);else h.push(g(m)),m="",v(e);else m+=e};for(const b of n){0===b.length&&h.push(g(m));a(b).forEach(e=>v(e)),m.length&&(h.push(g(m)),m="")}return p.remove(),l.remove(),h}function l({boxHeight:e,boxWidth:t,font:n,startFontSize:o,text:i}){var r,a;if("undefined"==typeof document||!document.body)return{fontSize:o,lines:[]};const l=document.body,c=document.createElement("div");l.appendChild(c);const d=i.split(/\r?\n/g);let u=o;const p=null!=(null===(r=n.fontOverrides)||void 0===r?void 0:r.letterSpacing)?n.fontOverrides.letterSpacing+"px":void 0,f=(null===(a=n.fontOverrides)||void 0===a?void 0:a.lineHeight)||1.1,h={letterSpacing:p,lineHeight:String(f),fontFamily:n.fontFamily,fontSize:u+"px",position:"absolute",visibility:"hidden",width:t+"px"};Object.assign(c.style,h);const m=document.createElement("div");for(m.style.display="inline",c.appendChild(m),d.forEach((e,t)=>{const n=document.createElement("span");n.style.wordBreak="break-word",m.appendChild(n),n.appendChild(document.createTextNode(e)),t!==i.length-1&&n.appendChild(document.createElement("br"))});(m.offsetHeight>e||m.offsetWidth>t)&&u>0;)u-=1,c.style.fontSize=u+"px";return m.remove(),c.remove(),{fontSize:u,lines:u>0?s({font:n,fontSize:u,textList:d,width:t}):[]}}},ZdPf:function(e,t,n){n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return a}));const o={CONDITIONAL:0,EMOTIONAL_DISDRESS_OR_SUICIDE:4},i={ABUSIVE:0,SENSITIVE:1,BRAND_UNSAFE:2};function r(e){return null!=e&&(!!e.notice||!!e.notices&&e.notices.length>0)}function a(e){return!!e&&e.severity===i.ABUSIVE}},a49R:function(e,t,n){n.d(t,"a",(function(){return s}));var o=n("q1tI"),i=n.n(o),r=(n("17x9"),n("n6mq"));function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const s=i.a.createContext(()=>{});class l extends o.Component{constructor(...e){super(...e),a(this,"state",{flyout:void 0,showOnTopOfModal:!1}),a(this,"setActive",(e,t,n=!1)=>{if(e){const e={...t,onDismiss:()=>{t&&t.onDismiss&&(t.onDismiss(),this.setState({flyout:void 0}))},positionRelativeToAnchor:!1};this.setState({flyout:{props:e},showOnTopOfModal:n})}else this.setState({flyout:void 0})})}render(){var e,t,n,o,a,l,c,d,u;const{flyout:p,showOnTopOfModal:f}=this.state,{children:h}=this.props;return i.a.createElement(i.a.Fragment,null,i.a.createElement(s.Provider,{value:this.setActive},h),p&&i.a.createElement("div",f?{style:{zIndex:752,position:"absolute",top:0}}:{},i.a.createElement(r.p,{anchor:null===(e=p.props)||void 0===e?void 0:e.anchor,onDismiss:null===(t=p.props)||void 0===t?void 0:t.onDismiss,color:null===(n=p.props)||void 0===n?void 0:n.color,idealDirection:null===(o=p.props)||void 0===o?void 0:o.idealDirection,positionRelativeToAnchor:null===(a=p.props)||void 0===a?void 0:a.positionRelativeToAnchor,shouldFocus:null===(l=p.props)||void 0===l?void 0:l.shouldFocus,showCaret:null===(c=p.props)||void 0===c?void 0:c.showCaret,size:null===(d=p.props)||void 0===d?void 0:d.size},null===(u=p.props)||void 0===u?void 0:u.children)))}}t.b=l},bNC6:function(e,t,n){n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return d}));const o={id:14,name:"own_profile"},i={id:15,name:"other_profile"},r={initial_app_load:{unauth:{board:{id:114,name:"board_page_interactive"},pin_closeup:{id:113,name:"pin_page_interactive"},other_profile:{id:115,name:"user_page_interactive"},topic:{id:119,name:"topic_page_interactive"},sterling_signup:{id:201,name:"sterling_signup_main_pageload"},sterling_login:{id:202,name:"sterling_login_main_pageload"}},auth:{bizhub:{id:607,name:"bizhub_pinteractive"},homefeed:{id:19,name:"home_feed_pinteractive"},sterling_reporting_details:{id:218,name:"sterling_reporting_details_pageload"},sterling_reporting_overview:{id:219,name:"sterling_reporting_overview_pageload"},sterling_ads_create:{id:221,name:"sterling_adscreate_main_pageload"},sterling_ads_duplicate:{id:206,name:"sterling_adsduplication_main_pageload"},sterling_ads_edit:{id:204,name:"sterling_adsedit_main_pageload"},sterling_billing_profile:{id:203,name:"sterling_billingprofile_main_pageload"},sterling_bulk_editor:{id:205,name:"sterling_bulkeditor_main_pageload"},sterling_pin_builder:{id:222,name:"sterling_adscreate_pinbuilder_pageload"}}},client_route_push:{unauth:{},auth:{bizhub:{id:608,name:"bizhub_page_render"},homefeed:{id:2,name:"home_feed_render"},search:{id:3,name:"search_feed_render"},pin_closeup:{id:13,name:"pin_closeup_details"},own_profile:o,other_profile:i}},client_route_replace:{unauth:{},auth:{own_profile:o,other_profile:i}}},a={client_route_push:{auth:{pin_closeup:{story_pin:{id:700,name:"story_pin_closeup"}}}}},s={board_picker:16,grid_bottom_spinner:12,facebook_autologin:500,google_autologin:501,story_pin_step:701},l=e=>{var t,n;const{navigationType:o,isAuthenticated:i,segment:s,surface:l}=e,c=i?"auth":"unauth",d=null===(t=a[o])||void 0===t||null===(n=t[c])||void 0===n?void 0:n[l];return s&&d&&d[s]||r[o][c][l]},c=e=>{if("stopwatch"===e.type)return s[e.name]||null;const t=l(e);return t?t.id:null},d=e=>{if("stopwatch"===e.type)return e.name;const{navigationType:t,isAuthenticated:n,segment:o,surface:i}=e,r=n?"auth":"unauth",a=l(e);return a?a.name:`${t}_${r}_${i}${o?"_"+o:""}`}},bZU8:function(e,t,n){n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s}));const o="pwt-grid-item",i=['div[data-grid-item="true"]',"div.Masonry div.Collection-Item","div.Grid__Item",`div[data-test-id="${o}"]`],r=i.join(","),a=i.map(e=>e+" img").join(","),s=i.map(e=>e+" div[style*=background-image]").join(",")},"bo/h":function(e,t,n){n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));const o="0.8.0";function i(e,t=1){return{x:e/5,y:e*(t-1)}}},e0nq:function(e,t,n){function o(e){return{type:"PIN_BETTER_SAVE",payload:e}}function i(e){return{type:"PIN_BETTER_UNSAVE",payload:e}}function r(e){return{type:"PIN_BETTER_SELECT_BOARD_OR_SECTION",payload:e}}function a(e){return{type:"POST_REPIN_MORE_IDEAS_UPSELL_SHOWN",payload:{boardId:e}}}n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a}))},eIuQ:function(e,t,n){n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return s})),n.d(t,"c",(function(){return l}));var o=n("Ye/N");function i(e){return e?o.a._("Title too long. Make sure all cards' titles have less than 100 characters","Title entered is too long while editing a carousel pin and/or one of its pins","Title entered is too long while editing a carousel pin and/or one of its pins"):o.a._("Title too long. Make sure title has less than 100 characters","Title entered is too long while editing a pin","Title entered is too long while editing a pin")}function r(e){return e?o.a._("Description too long. Make sure all cards' descriptions have less than 500 characters","Description entered is too long while editing a carousel pin and/or one of its pins","Description entered is too long while editing a carousel pin and/or one of its pins"):o.a._("Description too long. Make sure description has less than 500 characters","Description entered is too long while editing a pin","Description entered is too long while editing a pin")}function a(e){return o.a._("Too many mentions. Make sure you have at most 5.","editPinModal.errorMessages.userMentionOverLimit","Too many mentions used in the description")}function s(e){return e?o.a._("Note too long. Make sure all cards' notes have less than 500 characters","User note entered is too long while editing a carousel pin and/or one of its pins","User note entered is too long while editing a carousel pin and/or one of its pins"):o.a._("Note too long. Make sure note has less than 500 characters","User note entered is too long while editing a pin","User note entered is too long while editing a pin")}function l(e){return e?o.a._("Need to provide a valid URL. Make sure all cards' links are valid","Invalid URL/link provided while editing a carousel pin and/or one of its pins","Invalid URL/link provided while editing a carousel pin and/or one of its pins"):o.a._("Need to provide a valid URL. Make sure the link is valid","Invalid URL/link provided while editing a pin","Invalid URL/link provided while editing a pin")}},etmJ:function(e,t,n){n.d(t,"e",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"f",(function(){return c})),n.d(t,"j",(function(){return d})),n.d(t,"i",(function(){return u})),n.d(t,"h",(function(){return p})),n.d(t,"k",(function(){return f})),n.d(t,"m",(function(){return h})),n.d(t,"l",(function(){return m})),n.d(t,"g",(function(){return g}));var o=n("gIz7");const i="pin-builder-font-faces",r="licensed",a="system",s="brand",l=4,c=[{fontGroup:r,fontFamily:"A-FRAME",defaultStyle:0,format:"truetype",fontOverrides:{letterSpacing:0,lineHeight:.9,textTransform:!0},styles:[{name:"Black",fontStyle:"",fontWeight:"normal",fontUrl:"https://assets.pinterest.com/fonts/Graphik XCond-Black.otf"}]},{fontGroup:r,fontFamily:"Cross-stitch",defaultStyle:0,format:"truetype",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},styles:[{name:"Black",fontStyle:"normal",fontWeight:"normal",fontUrl:"https://assets.pinterest.com/fonts/Produkt-Medium.otf"}]},{fontGroup:r,fontFamily:"Lagoon",defaultStyle:0,format:"truetype",fontOverrides:{letterSpacing:0,lineHeight:.9,textTransform:!1},styles:[{name:"Black",fontStyle:"",fontWeight:"normal",fontUrl:"https://assets.pinterest.com/fonts/Gabriello-Black.otf"}]},{fontGroup:r,fontFamily:"Lava lamp",defaultStyle:0,format:"truetype",fontOverrides:{letterSpacing:0,lineHeight:.9,textTransform:!1},styles:[{name:"Black",fontStyle:"",fontWeight:"normal",fontUrl:"https://assets.pinterest.com/fonts/Publico Banner-Ultra Italic.otf"}]},{fontGroup:r,fontFamily:"Marathon",defaultStyle:0,format:"truetype",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},styles:[{name:"Black",fontStyle:"",fontWeight:"normal",fontUrl:"https://assets.pinterest.com/fonts/Produkt-Super Italic.otf"}]},{fontGroup:r,fontFamily:"Sourdough",defaultStyle:0,format:"truetype",fontOverrides:{letterSpacing:0,lineHeight:.9,textTransform:!1},styles:[{name:"Black",fontStyle:"",fontWeight:"normal",fontUrl:"https://assets.pinterest.com/fonts/Publico Banner-Bold.otf"}]},{fontGroup:r,fontFamily:"Superglue",format:"truetype",fontOverrides:{letterSpacing:0,lineHeight:.9,textTransform:!1},defaultStyle:0,styles:[{name:"Bold Italic",fontStyle:"",fontWeight:"normal",fontUrl:"https://assets.pinterest.com/fonts/Graphik-Bold+Italic.otf"}]},{fontGroup:a,fontFamily:"Merriweather",fontFaceUrl:"https://fonts.googleapis.com/css?family=Merriweather:700",fontOverrides:{letterSpacing:0,lineHeight:1.2,textTransform:!1},defaultStyle:0,styles:[{name:"Bold Italic",fontStyle:"italic",fontWeight:"700"}]},{fontGroup:r,fontFamily:"Noto Serif SC",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Serif+SC:400&display=swap&subset=chinese-simplified",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"zh-CN"},{fontGroup:r,fontFamily:"Noto Sans SC",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Sans+SC:400&display=swap&subset=chinese-simplified",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"zh-CN"},{fontGroup:r,fontFamily:"Noto Serif TC",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Serif+TC:400&display=swap&subset=chinese-traditional",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"zh-TW"},{fontGroup:r,fontFamily:"Noto Sans TC",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Sans+TC:400&display=swap&subset=chinese-traditional",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"zh-TW"},{fontGroup:r,fontFamily:"Noto Serif KR",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Serif+KR:400&display=swap&subset=korean",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"ko-KR"},{fontGroup:r,fontFamily:"Noto Sans KR",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Sans+KR:400&display=swap&subset=korean",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"ko-KR"},{fontGroup:r,fontFamily:"Noto Serif JP",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Serif+JP:400&display=swap&subset=japanese",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"ja"},{fontGroup:r,fontFamily:"Noto Sans JP",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Sans+JP:400&display=swap&subset=japanese",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"ja"},{fontGroup:r,fontFamily:"Noto Serif",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Serif:400&display=swap",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"hi-IN"},{fontGroup:r,fontFamily:"Noto Sans",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Sans:400&display=swap",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"hi-IN"},{fontGroup:a,fontFamily:"Playfair Display",fontFaceUrl:"https://fonts.googleapis.com/css?family=Playfair+Display:400",fontOverrides:{letterSpacing:0,lineHeight:1.2,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}]},{fontGroup:a,fontFamily:"Raleway",fontFaceUrl:"https://fonts.googleapis.com/css?family=Raleway:900",fontOverrides:{letterSpacing:0,lineHeight:1.2,textTransform:!1},defaultStyle:0,styles:[{name:"Black",fontStyle:"",fontWeight:"900"}]},{fontGroup:a,fontFamily:"Roboto Condensed",fontFaceUrl:"https://fonts.googleapis.com/css?family=Roboto+Condensed:700i",fontOverrides:{letterSpacing:0,lineHeight:1.2,textTransform:!1},defaultStyle:0,styles:[{name:"Bold Italic",fontStyle:"italic",fontWeight:"700"}]},{fontGroup:a,fontFamily:"Suez One",fontFaceUrl:"https://fonts.googleapis.com/css?family=Suez+One&display=swap",fontOverrides:{letterSpacing:0,lineHeight:.9,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}]},{fontGroup:a,fontFamily:"Domine",fontFaceUrl:"https://fonts.googleapis.com/css?family=Domine&display=swap",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}]},{fontGroup:a,fontFamily:"Overlock",fontFaceUrl:"https://fonts.googleapis.com/css?family=Overlock:900i&display=swap",fontOverrides:{letterSpacing:-1,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Black Italic",fontStyle:"",fontWeight:"400"}]},{fontGroup:a,fontFamily:"Satisfy",fontFaceUrl:"https://fonts.googleapis.com/css?family=Satisfy&display=swap",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}]}];function d(){return c}function u(e,t,n){const o=e.styles.find(e=>e.fontStyle===t&&e.fontWeight===n);return o?o.name:""}function p(e,t){return e.reduce((e,t)=>[...e,...t.fonts],[]).find(e=>e.fontFamily===t)||null}function f(e){return Object(o.a)(e,i)}function h(){return Object(o.a)(d(),"system-font-faces")}function m(){return Object(o.a)([c[l]],"pin-builder-education-font-faces")}function g(e){const t=function(e){const t=d();if(e){const n=t.findIndex(t=>t.localeFilter===e);if(n>=0)return t[n]}return t[6]}(e),n=t.defaultStyle,o=t.styles[n],{fontFamily:i,fontOverrides:a}=t,s=a&&a.textTransform?1:0,l=a&&a.lineHeight||1.2,c=a&&a.letterSpacing||0;return{fontGroupName:r,fontFamilyName:i,fontStyleName:o.name,fontWeight:o.fontWeight,fontSize:50,textColor:"#FFFFFF",marginIndex:1,alignmentIndex:1,positionIndex:2,backgroundColor:"",backgroundTransparencyIndex:0,lineHeight:l,letterSpacing:c,transformIndex:s,showMoreOptions:!1}}},fEA9:function(e,t,n){n.r(t),n.d(t,"PinBetterSave",(function(){return Q}));var o=n("q1tI"),i=n.n(o),r=n("/MKj"),a=n("qWlA"),s=(n("1vym"),n("TSYQ")),l=n.n(s),c=n("Ye/N"),d=n("pLLR"),u=n("n6mq");function p(e){const{dropdownClasses:t,dropdownRef:n,onBoardDropdownClick:r,onSaveClick:a,renderPinSaveTooltip:s,saveButtonClasses:d,saveButtonRef:p,showSaveButton:f,textColor:h,title:m}=e;return i.a.createElement(u.d,{alignItems:"center",display:"flex",width:"100%",height:44},i.a.createElement("button",{className:t,"data-test-id":"PinBetterSaveDropdown",onClick:r,ref:n},i.a.createElement(u.d,{paddingX:4,display:"flex",flex:"grow",alignItems:"center"},i.a.createElement(u.d,{flex:"grow",overflow:"hidden"},i.a.createElement(u.U,{color:h,truncate:!0,size:"sm"},i.a.createElement("span",{className:l()("PinBetterSave__DropdownText","PinBetterSave__DropdownText--lego")},m))),i.a.createElement(u.d,{marginStart:2,flex:"none","data-test-id":"boardSelectionDropdown"},i.a.createElement("div",{className:l()("PinBetterSave__DownArrowContainer","PinBetterSave__DownArrowContainer--lego")},i.a.createElement(u.s,{accessibilityLabel:c.a._("Select a board you want to save to","BetterSave accessibility label to change the board","BetterSave accessibility label to change the board"),color:"darkGray",icon:"arrow-down",size:12}))))),f&&i.a.createElement(o.Fragment,null,i.a.createElement("button",{className:d,onClick:a,"data-test-id":"PinBetterSaveButton",ref:p},i.a.createElement(u.U,{color:"white",size:"sm",weight:"bold"},c.a._("Save","BetterSave Save label","BetterSave Save label"))),!!s&&!!p.current&&s(p.current)))}function f(e){const{dropdownRef:t,onBoardDropdownClick:n,onSaveClick:o,renderPinSaveTooltip:r,saveButtonRef:a,showSaveButton:s,title:l}=e;return i.a.createElement(u.d,{alignItems:"center",display:"flex",width:"100%"},i.a.createElement(u.d,{flex:"grow",overflow:"hidden",width:"100%"},i.a.createElement(u.T,{onTap:({event:e})=>n(e),ref:t},i.a.createElement(u.d,{alignItems:"center",display:"flex",flex:"grow",paddingX:4},i.a.createElement(u.d,{flex:"grow"},i.a.createElement(u.U,{color:"darkGray",size:"lg",truncate:!0,weight:"bold"},l)),i.a.createElement(u.d,{marginStart:2,flex:"none","data-test-id":"boardSelectionDropdown"},i.a.createElement(u.s,{accessibilityLabel:c.a._("Select a board you want to save to","PinBetterSave.BoardSelection.DropdownIcon","BetterSave accessibility label to change the board"),color:"darkGray",icon:"arrow-down",size:12}))))),s&&i.a.createElement(u.d,{flex:"none"},i.a.createElement(u.e,{color:"red",inline:!0,onClick:({event:e})=>{o(e)},ref:a,size:"lg",text:c.a._("Save","PinBetterSave.BoardSelection.SaveButton","BetterSave Save label")})),!!r&&!!a.current&&r(a.current))}function h(e){const{dropdownRef:t,onBoardDropdownClick:n,onSaveClick:r,renderPinSaveTooltip:a,selectedTitle:s,showSaveButton:c,unselectedText:u,variant:h,view:m}=e,{isRTL:g}=Object(d.d)(),v=Object(o.useRef)(),b=s||u;return"lego"===h?i.a.createElement(f,{dropdownRef:t,onBoardDropdownClick:n,onSaveClick:r,renderPinSaveTooltip:a,saveButtonRef:v,showSaveButton:c,title:b}):i.a.createElement(p,{dropdownClasses:l()("PinBetterSave__Dropdown","PinBetterSave__Dropdown--lego",{"PinBetterSave__Dropdown--rtl":g,"PinBetterSave__Dropdown--lego-pin":"pin"===m,"PinBetterSave__Dropdown--lego-closeup":"closeup"===m,"PinBetterSave__Dropdown--expandedLego":!c}),dropdownRef:t,onBoardDropdownClick:n,onSaveClick:r,renderPinSaveTooltip:a,saveButtonClasses:l()("PinBetterSave__Button","PinBetterSave__Button--lego",{"PinBetterSave__Button--rtl":g,"PinBetterSave__Button--lego-pin":"pin"===m}),saveButtonRef:v,showSaveButton:c,textColor:s?"darkGray":"gray",title:b})}var m=n("clxp"),g=n("1inl"),v=n("ajUs"),b=n("a49R");class y extends i.a.Component{constructor(...e){var t,n,o;super(...e),o=()=>{const{setActive:e,showOnTopOfModal:t,...n}=this.props;e("flyout",n,t||!1)},(n="renderFlyout")in(t=this)?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o}componentDidMount(){this.renderFlyout()}componentDidUpdate(){this.renderFlyout()}componentWillUnmount(){this.props.setActive()}render(){return null}}const S=e=>i.a.createElement(b.a.Consumer,null,t=>i.a.createElement(y,Object.assign({},e,{setActive:t})));S.displayName="MasonryFlyout";var _=S,w=n("3gA6"),C=n("eOdZ"),O=n("/5zs"),E=n("lm6u");function T(e){const{action:t,additionalCreateFields:n,boardWithSection:r,children:a,onClose:s,pin:l,setCompletionPromise:c,showModal:u}=e,p=((e,t)=>{const[n,i]=Object(o.useState)([]),r=Object(d.d)();return Object(o.useEffect)(()=>{let n=!1;return e&&new O.c(r,"web_board_section_templates").enabled()&&C.a.create("SectionRecommendationsResource",{pinIds:[t]}).callGet().then(e=>{var t;if(n)return;const o=null==e||null===(t=e.resource_response)||void 0===t?void 0:t.data;i(o.length>0&&o[0]||[])}),()=>{n=!0}},[e,t]),n})(u,l.id);return i.a.createElement(E.a,{additionalCreateFields:n,boardWithSection:r,action:t,hideSuccessAnimation:!!p.length,onClose:s,setCompletionPromise:c,showCreate:!0,shouldShowToast:!p.length,pin:l},e=>a({...e,sectionSuggestions:p}))}var I=n("uyxo"),B=n("v/Q4"),x=n("e3KR"),k=n("Wrea"),R=n("0zyx"),j=n("TN0d"),P=n("vvax"),D=n("EuRG"),F=n("H/Lk"),M=n("WnNx"),N=n("U4JR"),A=n("NjDU"),U=n("CvCA"),L=n("e0nq");class H extends i.a.PureComponent{constructor(...e){var t,n,o;super(...e),o=()=>{const{boardId:e}=this.props;Object(N.a)(101,{component:20,element:10805,objectId:e})},(n="handleClick")in(t=this)?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o}componentDidMount(){const{toastShown:e}=this.props;e()}render(){const{boardName:e,boardUrl:t,onHide:n}=this.props;return i.a.createElement(U.a,{duration:5e3,onHide:n,text:Object(P.b)(c.a._("Find more ideas for {{ boardName }}"),{boardName:e}).join(""),href:t+"more_ideas/?ideas_referrer=16",onClick:this.handleClick})}}var G=Object(r.connect)(null,(e,t)=>({toastShown:()=>e(Object(L.c)(t.boardId))}))(H),W=n("w70y"),z=n("ZdPf"),q=n("B6Tf"),$=n("oTtT"),Z=n("nGHF"),Y=n("0nTG"),V=n("y19s");function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X({savedInfo:e,variant:t}){const n="closeup"===t,o=n?"sm":"md";return i.a.createElement(w.b,{className:"underlineLink",stopPropagation:!0,style:{color:"#333"},to:e.url||""},i.a.createElement(u.d,{marginStart:n?1:0},i.a.createElement(u.U,{color:"darkGray",inline:!0,size:o},Object(P.b)(c.a._("Saved to {{ destination }}","Saved to label for better save","Saved to label for better save"),{destination:i.a.createElement(u.U,{color:"darkGray",key:"pin_auto_save_link",size:o,truncate:!0,weight:"bold",inline:!0},e.title)}))))}class Q extends i.a.Component{constructor(...e){var t;super(...e),t=this,K(this,"state",{boardWithSection:null,createdBoard:null,suggestedBoardTitle:"",showBoardFlyout:!1,showRepinModal:!1,sensitiveContentNotice:null}),K(this,"setBoardSaveCompletionPromise",e=>{const{createdBoard:t}=this.state;this._repinCompletionPromise=e,this._repinCompletionPromise.promise.then(e=>{if(!e.board)return;const{board:{id:n,name:o,url:i}}=e,r={boardId:n,title:o,url:i};this.updateSelectedBoardOrSection(r),this.updateSavedState({...r,localPinId:e.id}),t&&Object(z.d)(t.sensitivity)&&Object(z.c)(t.sensitivity)?this.setState({sensitiveContentNotice:t.sensitivity.notice||t.sensitivity.notices[0]}):this.handleRepinHide()})}),K(this,"updateSavedState",e=>{const{reduxLocation:t,save:n,searchQueryInvalidated:o,onSave:i,pin:{id:r}}=this.props,a=t.query&&t.query.q||Object(R.a)(t.history);n({pinId:r,...e}),a&&o(a),i&&i()}),K(this,"updateSelectedBoardOrSection",e=>{const{selectBoardOrSection:t,pin:{id:n}}=this.props;t({pinId:n,...e})}),K(this,"updateSelectedItem",()=>{const{initialSelection:e,selectedItem:t}=this.props;!t&&e&&this.updateSelectedBoardOrSection(e)}),K(this,"dropdownRef",i.a.createRef()),K(this,"handleItemChosen",e=>{this.updateSelectedBoardOrSection(e),this.hideFlyout(!0),this.save(e)}),K(this,"handleBoardCreate",Object(a.a)(({title:e=""}={})=>{this.hideFlyout(!0),this.setState(t=>({...t,suggestedBoardTitle:e,showRepinModal:!0}));const{onToggleFlyout:t}=this.props;t&&t(!0,!0)})),K(this,"handleBoardCreated",e=>{this.setState({createdBoard:e})}),K(this,"handleRepinHide",()=>{this.setState(e=>({...e,suggestedBoardTitle:"",showRepinModal:!1}));const{onToggleFlyout:e}=this.props;e&&e(!1,!1)}),K(this,"handleBoardDropdownClick",e=>{const{pin:{id:t},viewParameter:n,boardPickerStopwatch:o}=this.props;e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation(),this.state.showBoardFlyout?this.hideFlyout(!0):(Object(N.a)(101,{component:13282,element:10960,viewParameter:n,objectId:t}),o&&o.start(),this.showFlyout())}),K(this,"handleSaveClick",(async function(e){const{selectedItem:n}=t.props;n?(e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation(),Object(N.a)(101,{component:13282,element:36,objectId:n.boardId,grid_index:4}),await t.save(n)):t.handleBoardDropdownClick(e)})),K(this,"setBoardWithSection",e=>{this.setState({boardWithSection:e})}),K(this,"handleEditSubmit",({boardId:e,sectionId:t,url:n,title:o})=>{const{pin:{id:i},savedInfo:{localPinId:r}={}}=this.props;this.updateSavedState({pinId:i,localPinId:r,boardId:e,sectionId:t||"",url:n,title:o})}),K(this,"resetPinSavedState",()=>{this.updateSavedState({boardId:"",localPinId:"",sectionId:"",title:"",url:""})}),K(this,"deleteSavedState",()=>{const{unsave:e,onDelete:t,pin:{id:n}}=this.props;e({pinId:n}),t&&t()}),K(this,"save",(async function(e){const{isLimitedLogin:n,mostRecentBoard:o,pin:{id:r},postRepinMoreIdeasUpsell:a,postRepinUpsellDisabled:s,save:l,setMostRecentBoard:c,showRepinAnimation:d,toastManagerContext:u}=t.props;t.updateSavedState(e);try{const{resource_response:{data:n}}=await t.getPinResource(e).callCreate({showError:!1}),p=e.url,{incrementBoardPinCount:f,updateUserPinCount:h,viewerUserId:m}=t.props;!s&&p&&(({boardId:e,boardUrl:t,postRepinMoreIdeasUpsell:n})=>{if(!t)return!1;const{recentSaves:o,recentUpsell:i}=n;if(i[e])return!1;const r=o.findIndex(t=>t.boardId!==e);return(-1===r?o.length:r)+1>=3})({boardId:e.boardId,boardUrl:p,postRepinMoreIdeasUpsell:a})&&u.showToast(({onHide:t})=>i.a.createElement(G,{boardId:e.boardId,boardName:e.title,boardUrl:p,onHide:t})),l({pinId:r,...{...e,localPinId:n.id}}),j.b.publish("currentUser","pinCreated",n),j.b.publish(n.board.id,"pinCreated",{pin:n}),f({boardId:e.boardId,sectionId:e.sectionId}),h(m),d(r),o&&e.boardId!==o.id&&c(e.boardId,e.title,e.url)}catch(p){n||g.a.showError(p.message_detail||p.message),t.resetPinSavedState()}})),K(this,"hideFlyout",(e=!1)=>{const{onToggleFlyout:t}=this.props;this.setState({showBoardFlyout:!1}),t&&t(!1,e)})}componentDidMount(){const{onMount:e}=this.props;this.updateSelectedItem(),e&&e()}componentDidUpdate(e,t){this.updateSelectedItem()}getPinResource(e){const{carouselData:t,location:n,previousHistory:o,pin:i}=this.props,r=t&&t.index,a=Object(v.a)(i,n,o)||i.tracking_params+"~0",s={description:i.description||"",link:i.link,title:i.title||"",clientTrackingParams:a,board_id:e.boardId||"",pin_id:i.id||"",image_base64:i.image_base64,is_buyable_pin:!1,is_removable:i.promoted_is_removable,carousel_slot_index:r||0,...e.sectionId?{section:e.sectionId}:{},...Object(Y.f)(i)||{}};return C.a.create("RepinResource",s)}showFlyout(){const{onToggleFlyout:e}=this.props;this.setState({showBoardFlyout:!0}),e&&e(!0,!0)}render(){const{boardResource:e,carouselData:t,onToggleModal:n,pin:o,renderPinSaveTooltip:r,renderSavedStatus:a,requestContext:s,savedInfo:l,selectedItem:c,unselectedText:d,useMasonryFlyout:p,variant:f,viewParameter:g}=this.props,{boardWithSection:v,showBoardFlyout:b,showRepinModal:y,sensitiveContentNotice:S,suggestedBoardTitle:w}=this.state,C=new O.c(s,"web_pinbettersave_legofication").enabled(),E=p?_:u.p,B=i.a.createElement(x.a,{boardResource:e,setBoardWithSection:this.setBoardWithSection,onItemChosen:this.handleItemChosen,onBoardCreate:this.handleBoardCreate,pin:o});return i.a.createElement(m.a,{name:"PinBetterSave"},i.a.createElement(u.d,{width:"100%",display:"closeup"===f?"flex":void 0,height:C?48:"closeup"===f?44:void 0,color:C||"closeup"!==f?void 0:"lightGray",rounding:C||"closeup"!==f?void 0:4},(null==l?void 0:l.title)?i.a.createElement(I.a,{currentCarouselIndex:t&&t.index,onDeleteSavedState:this.deleteSavedState,onEditSubmit:this.handleEditSubmit,onToggleModal:n,pinId:l.localPinId,variant:f,viewParameter:g},a&&l&&a({savedInfo:l,variant:f})):i.a.createElement(h,{dropdownRef:this.dropdownRef,onBoardDropdownClick:this.handleBoardDropdownClick,onSaveClick:this.handleSaveClick,renderPinSaveTooltip:r,selectedTitle:c&&c.title,showSaveButton:!b,unselectedText:d,view:f,variant:C?"lego":"default"}),i.a.createElement(T,{additionalCreateFields:{is_stl_pin:Object(Y.i)(o)},boardWithSection:v,action:"create",onClose:this.handleRepinHide,setCompletionPromise:this.setBoardSaveCompletionPromise,showModal:y,pin:o},({boardSavedTo:e,dismissModal:t,displaySuccessAnimation:n,handleAbort:o,handleNewBoardAnimationCompletion:r,handleSocialConnectSet:a,handleSaveToBoard:s,newPin:l,updateDescription:c,modalTitle:d,sectionSuggestions:u,setModalTitle:p,pin:f})=>i.a.createElement(q.b,{boardSavedTo:e,isInModal:!0,displaySuccessAnimation:n,dismissModal:t,handleAbort:o,handleNewBoardAnimationCompletion:r,handleSocialConnectSet:a,handleSaveToBoard:s,updateDescription:c,onBoardCreated:this.handleBoardCreated,sensitiveContentNotice:S,pin:f,pwtAuxData:{pin_create_method:"repin"},sectionSuggestions:u,suggestedBoardTitle:w,boardWithSection:v,shouldRenderContent:y,newPin:l,modalTitle:d,setModalTitle:p,showCreate:!0})),b&&"closeup"===f&&i.a.createElement(u.p,{anchor:this.dropdownRef.current,idealDirection:"down",onDismiss:this.hideFlyout,size:"lg"},B),b&&"pin"===f&&i.a.createElement(E,{anchor:this.dropdownRef.current,idealDirection:"down",onDismiss:this.hideFlyout,positionRelativeToAnchor:!p,size:"lg"},B)))}}K(Q,"defaultProps",{variant:"pin",renderSavedStatus:({savedInfo:e,variant:t})=>i.a.createElement(X,{savedInfo:e,variant:t})});t.default=i.a.memo((function(e){var t;const{pin:{id:n}}=e,o=Object(W.a)({name:"BoardPickerBoardsResource",options:{field_set_key:"board_picker"}}),a=Object(W.a)({name:"BoardPickerBoardsShortlistResource",options:{pin_id:e.pin.id,shortlist_length:2,num_shortlist_suggestions:2,suggestions_only:!0,min_confidence:.5}}),{history:s,location:l}=Object(V.b)(),p=Object(d.d)(),f=Object(Z.b)(),h=Object($.b)(),m=Object(B.a)(),g=Object(r.useDispatch)(),v=Object(r.useSelector)(({mostRecentBoard:e})=>e),b=Object(r.useSelector)(({pins:e})=>e[n]),y=Object(r.useSelector)(({history:e})=>e.previous),S=Object(r.useSelector)(({location:e})=>e),_=Object(r.useSelector)(({ui:e})=>e.postRepinMoreIdeasUpsell);let w=e.initialSelection,C=(null===(t=w)||void 0===t?void 0:t.title)||"",O=!0;if(!w){const e=a&&a.data&&a.data[0];w=a&&a.isLoaded&&e&&{boardId:e.id,title:e.name,url:e.url}||a&&a.isLoaded&&!e&&v&&{boardId:v.id,title:v.name,url:v.url}||void 0,C=a&&a.isLoaded?c.a._("Select","BetterSave label to pick a board from the list","BetterSave label to pick a board from the list"):"...",O=!1}return i.a.createElement(u.d,{overflow:"hidden"},i.a.createElement(Q,Object.assign({},e,{boardResource:o,boardPickerStopwatch:h,carouselData:b&&b.carousel_data,history:s,incrementBoardPinCount:({boardId:e,sectionId:t})=>g(Object(k.d)({boardId:e,sectionId:t,increment:1})),initialSelection:w,isLimitedLogin:m.isLimitedLogin,location:l,mostRecentBoard:v,postRepinMoreIdeasUpsell:_,postRepinUpsellDisabled:O,previousHistory:y,reduxLocation:S,requestContext:p,save:e=>g(Object(L.a)(e)),savedInfo:b&&b.savedInfo,searchQueryInvalidated:e=>g(Object(D.b)(e)),selectBoardOrSection:e=>g(Object(L.b)(e)),selectedItem:b&&b.selectedItem,setMostRecentBoard:(e,t,n)=>g(Object(F.a)(e,t,n)),showRepinAnimation:e=>g(Object(M.b)(e)),toastManagerContext:f,unsave:e=>g(Object(L.d)(e)),unselectedText:C,updateUserPinCount:e=>g(Object(A.b)({userId:e,increment:1})),viewerUserId:m.isAuth?m.id:""})))}))},gIz7:function(e,t,n){n.d(t,"a",(function(){return r}));var o=n("A0Lk"),i=n.n(o);function r(e,t){if("undefined"==typeof window)return Promise.resolve();let n=document.querySelector("#"+t);if(n)return Promise.resolve();n=document.createElement("style"),n.setAttribute("id",t),e.filter(e=>!!e.fontFaceUrl).forEach(e=>{n&&e.fontFaceUrl&&n.appendChild(document.createTextNode(`@import url('${e.fontFaceUrl}');`))});const o=document.head;if(!o)return Promise.resolve();const r=document.createElement("style");r.setAttribute("id",t+"-font-faces"),o.appendChild(n),o.appendChild(r);const a=[];return e.forEach(e=>{e.styles.forEach(t=>{if(e.format&&t.fontUrl&&r&&r.sheet){r.sheet.insertRule(`\n            @font-face {\n              font-family: "${e.fontFamily}";\n              font-style: "${t.fontStyle}";\n              font-weight: "${t.fontWeight}";\n              src: url("${t.fontUrl}") format("${e.format}");\n            }`,0)}a.push(new i.a(e.fontFamily,{weight:t.fontWeight,style:t.fontStyle}).load())})}),Promise.all(a)}},gg0E:function(e,t,n){n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return b}));var o=n("q1tI"),i=n("SyXB"),r=n("0YPa"),a=n("bNC6"),s=n("HMdf"),l=n("3/Bf"),c=n("y2Ga"),d=n("bZU8");const u=(e,t)=>{const n=(e=>e instanceof HTMLDivElement?e.getBoundingClientRect():e.parentElement instanceof HTMLElement?e.parentElement.getBoundingClientRect():null)(e);if(!n)return Object(l.b)("missing_client_rect"),!1;return!(e instanceof HTMLImageElement&&n.width<100&&n.height<100)&&(({top:e,height:t},{foldY:n,pageYOffset:o})=>{const i=e+o;if(i>=n)return!1;const r=Math.min(t,n-i);return r>.5*t||r>.2*n})(n,t)},p=()=>{const e=(()=>{if(!document.querySelector)return Object(l.b)("missing_document_query_selector"),null;const e=document.querySelectorAll(d.d);return e[e.length-1]||null})();if(!e)return!1;const t=window.innerHeight||0,n=window.pageYOffset||0;return e.getBoundingClientRect().top+n>=t},f=e=>{if(!document.querySelector)return Object(l.b)("missing_document_query_selector"),[];const t={foldY:window.innerHeight||0,pageYOffset:window.pageYOffset||0},n=[d.b,...e?[d.a]:[]].join(",");return[...document.querySelectorAll(n)].reduce((e,n)=>{if((n instanceof HTMLImageElement||n instanceof HTMLDivElement)&&u(n,t)){const t=(e=>{if(e instanceof HTMLImageElement)return e.src;const t=((e.style||{}).backgroundImage||"").match(/^url\(["'](http.*)["']\)$/);return t&&t[1]||null})(n);if(t)return e.concat([{htmlElement:n,url:t}])}return e},[])};var h=n("LrH5");const m=Object(h.a)("GridProfiler"),g=()=>!!(window.addEventListener&&window.removeEventListener&&"number"==typeof window.innerHeight&&"number"==typeof window.pageYOffset&&document.querySelector&&document.querySelectorAll),v=(e,t)=>{if(!t){const t=document.querySelector?document.querySelectorAll(d.d).length:(Object(l.b)("missing_document_query_selector"),0);if(t===e)return m("No new items, so skip the viewport-fill check."),{complete:!1,numOfItemsChecked:e};if(!p())return m("Viewport may not be filled yet."),{complete:!1,numOfItemsChecked:t}}return{complete:!0}};function b({isAtEndOfFeed:e,includeBackgroundImages:t}){const n=Object(c.c)(),d=null==n?void 0:n.id,u=null==n?void 0:n.setVisuallyCompleteResult,[p,g]=Object(o.useState)({status:"DISABLED"});Object(o.useEffect)(()=>{g(u?{status:"LAYOUT",failedCount:0,numOfItemsChecked:0}:{status:"DISABLED"})},[d,u]),Object(o.useEffect)(()=>{if("DISABLED"!==p.status&&Object(i.c)("GridVisuallyCompleteProfiler_"+p.status),m("new status",p),"LAYOUT"===p.status){const e=((e,t)=>{const n=()=>{window.removeEventListener(e,n),t()};return window.addEventListener(e,n),()=>window.removeEventListener(e,n)})("scroll",()=>{Object(i.c)("scrollDuringLayout")});return()=>{e()}}return()=>{}},[p.status]),Object(r.a)(()=>{if(!n||!u)return;const{abort:o,metricId:i}=n;switch(p.status){case"LAYOUT":{const n=v(p.numOfItemsChecked,e);n.complete?g({status:"TIMING",failedCount:0,images:f(t).map(({htmlElement:e,url:t})=>({fileName:(t||"").replace(/.*\//,""),element:e}),[])}):500*p.failedCount>6e4?(Object(l.c)(`images.${Object(a.b)(i)}.visuallyComplete.maxLayoutAttempt`),o("visuallyComplete_layoutTimeout"),g({status:"DISABLED"})):g({...p,failedCount:p.failedCount+1,numOfItemsChecked:n.numOfItemsChecked});break}case"TIMING":{const e=Object(s.c)(),t=p.images.length,n=[];let r=0,c=0,d=0;p.images.forEach(({element:t,fileName:o})=>{const i=e.find(e=>("img"===e.initiatorType||"css"===e.initiatorType)&&e.name.endsWith(o));i?i.responseEnd?(n.push(i),Object(h.b)(t,"green")):(d+=1,Object(h.b)(t,"blue")):t instanceof HTMLImageElement&&t.complete?(c+=1,Object(h.b)(t,"red")):(r+=1,Object(h.b)(t,"greenyellow"))}),r||d?100*p.failedCount>6e4?(Object(l.c)(`images.${Object(a.b)(i)}.visuallyComplete.maxAttempt`,{tags:{totalImageCount:t,incompleteCount:r,noTimingCount:c,noTimingResponseEndCount:d}}),o("visuallyComplete_timingTimeout"),g({status:"DISABLED"})):g({...p,failedCount:p.failedCount+1}):(m(`All ${n.length} images are fetched`),u({imageTimings:n}),g({status:"DISABLED"}),Object(l.c)(`images.${Object(a.b)(i)}.visuallyComplete.complete`,{tags:{totalImageCount:t,noTimingCount:c}}));break}}},(e=>("LAYOUT"===e.status?500:"TIMING"===e.status&&100)||null)(p))}},guDk:function(e,t,n){n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));n("Ye/N");const o=e=>!1,i=e=>null},jHGc:function(e,t,n){n.r(t),n.d(t,"PinRepEditButton",(function(){return l}));var o=n("q1tI"),i=n.n(o),r=n("Ye/N"),a=n("dtqy"),s=n("n6mq");function l({handlePinEditButtonClick:e,style:t,useLegoStyles:n=!1,usePersistentOneClickSaveStyles:o,wrappingIconStyle:a}){const l=i.a.createElement(s.t,{accessibilityLabel:r.a._("Edit","edit button on pin","edit button on pin"),bgColor:t&&t.bgColor||"white",icon:"edit",iconColor:t&&t.iconColor||"darkGray",onClick:({event:t})=>e(t),size:t&&t.size||"md"});return n||o?i.a.createElement("div",{style:{...a||{}}},l):l}t.default=Object(a.a)(l)},jZhD:function(e,t,n){n.d(t,"a",(function(){return a}));var o=n("q1tI"),i=(n("17x9"),n("pdBG"));function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class a extends o.Component{constructor(...e){super(...e),r(this,"searchCache",Object.create(null)),r(this,"lastSearchedQuery",null),r(this,"search",e=>{this.lastSearchedQuery=e,e in this.searchCache?this.props.onTypeaheadSuggestionsChange(this.searchCache[e],e):this.provider.search(e,({items:t})=>{this.searchCache[e]=t,e===this.lastSearchedQuery&&this.props.onTypeaheadSuggestionsChange(t,e)})})}componentDidMount(){const e=this.props.resourceOptions||{};this.provider=new i.a({resource_name:this.props.resourceName,...e});const{value:t}=this.props;null!=t&&this.props.allowSearchOnMount&&this.search(this.props.value)}componentDidUpdate(e){const{value:t}=this.props;null!=t&&t!==e.value&&this.search(t)}render(){return this.props.children||null}}r(a,"defaultProps",{resourceName:"TypeaheadResource"})},"lm/5":function(e,t,n){var o=n("fmRc"),i=n("wF/u");e.exports=function(e,t,n,r){var a=n.length,s=a,l=!r;if(null==e)return!s;for(e=Object(e);a--;){var c=n[a];if(l&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++a<s;){var d=(c=n[a])[0],u=e[d],p=c[1];if(l&&c[2]){if(void 0===u&&!(d in e))return!1}else{var f=new o;if(r)var h=r(u,p,d,e,t,f);if(!(void 0===h?i(p,u,3,r,f):h))return!1}}return!0}},lm6u:function(e,t,n){n.d(t,"a",(function(){return R}));var o=n("q1tI"),i=n.n(o),r=n("/MKj"),a=n("1inl"),s=n("3z7j"),l=n("ajUs"),c=n("Ye/N");var d=n("TN0d"),u=n("eOdZ"),p=n("G35+"),f=n("CvCA"),h=n("Wrea"),m=n("ANjH"),g=n("Vzit"),v=n("xjIv"),b=n("WnNx"),y=n("n6mq"),S=n("U4JR"),_=n("NjDU"),w=n("C0mq"),C=n("6G9P"),O=n("B6Tf"),E=n("oTtT"),T=n("nGHF"),I=n("oN2T");function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const x=/#[^(\-\\.\s#,\/$%\^&\*;:{}=\`~()\[\]@|<>â€¦)]+/gi;class k extends i.a.Component{constructor(...e){super(...e),B(this,"state",{boardSavedTo:null,displaySuccessAnimation:!1,newPin:null,modalTitle:this.props.showCreate?c.a._("Create board","Repin title for making a new board","Repin title for making a new board"):c.a._("Choose board","Repin title for choosing a board","Repin title for choosing a board")||"",pinDescription:this.props.pin&&this.props.pin.description||"",resolve:void 0,sharing:{facebook:!1,twitter:!1}}),B(this,"unmounted",!1),B(this,"setModalTitle",e=>this.safeSetState({modalTitle:e})),B(this,"updateDescription",e=>{this.safeSetState({pinDescription:e})}),B(this,"close",()=>{const{onClose:e,boardPickerStopwatch:t}=this.props;e&&e(),t&&t.abort("boardPickerClose"),Object(S.a)(2502,{component:5,element:610})}),B(this,"safeSetState",(e,t)=>{this.unmounted?t&&t():this.setState(e,t)}),B(this,"getPinResource",(e,t,n)=>{var o;const{color:i,location:r,pin:a,method:s,guid:c,additionalCreateFields:d,advertiser_id:p,previousHistory:f}=this.props;let h;a.id&&(h=Object(l.a)(a,r,f)||a.tracking_params+"~0");const m=a.id?"RepinResource":"PinResource",g=!a.id&&a.image_url?Object(C.b)(a.image_url,a.link):(null===(o=a.images.orig)||void 0===o?void 0:o.url)||"",v={...d,board_id:t||"",color:i||"",clientTrackingParams:h,description:this.state.pinDescription,guid:c||"",link:a.link,image_base64:a.image_base64,image_url:g,is_buyable_pin:!1,is_removable:a.promoted_is_removable,media_upload_id:a.media_upload_id,method:s||"",pin_id:a.id||"",section:n,title:a.title||"",...p?{advertiser_id:p}:{}};if(!e){const{facebook:e,twitter:t}=this.state.sharing;v.share_facebook=e,v.share_twitter=t}return u.a.create(m,v)}),B(this,"triggerPubSubs",e=>{d.a.instance.publish("currentUser","pinCreated",e),d.a.instance.publish(e.board.id,"pinCreated",{pin:e})}),B(this,"makeCancelablePromise",e=>{let t=!1;return{promise:new Promise((n,o)=>{e.then(e=>t?o({isCanceled:!0}):n(e)),e.catch(e=>o(t?{isCanceled:!0}:e))}),cancel(){t=!0}}}),B(this,"handleLogToastClick",()=>{Object(S.a)(101,{component:20,view:52})}),B(this,"showSuggestedBoardToast",(e,t,n,o)=>{const{toastManagerContext:r,shouldShowToast:a}=this.props;if(a&&e){const{name:t,url:n,image_thumbnail_url:o}=e;r.showOneToast(({onHide:e})=>i.a.createElement(f.a,{duration:O.a,onHide:e,text:i.a.createElement(i.a.Fragment,null,i.a.createElement(y.U,{color:"white"},c.a._("You might also like","Post repin suggested board","Post repin suggested board")),i.a.createElement(y.U,{color:"white",weight:"bold"},t)),href:n,imageUrl:o,onClick:this.handleLogToastClick}))}}),B(this,"showBoardSavedToast",(e,t)=>{const{toastManagerContext:n}=this.props;n.showToast(({onHide:n})=>i.a.createElement(f.a,{duration:O.a,onHide:n,text:Object(C.a)(e.name,t),href:t?`${e.url}${t.slug}`:e.url,imageUrl:e.image_cover_url,onClick:this.handleLogToastClick}))}),B(this,"dismissModal",e=>{const{resolve:t,newPin:n}=this.state;t&&t(n)}),B(this,"fetchBoardRecommendation",e=>u.a.create("RelatedBoardForPinRandomFeedResource",{pin:e.id,page_size:1}).callGet({showError:!1}).then(e=>Promise.resolve(e.resource_response.error?null:e.resource_response.data[0]))),B(this,"handleBoardSaveSuccess",(e,t,n,o)=>{const{action:i,dispatch:r,hideSuccessAnimation:a,homeTakeoverExperience:l,pin:d,setCompletionPromise:u,shouldShowToast:p,viewerUserId:f}=this.props;r(Object(g.d)());const m=e.resource_response.data,y=this.makeCancelablePromise(new Promise((e,s)=>{this.triggerPubSubs(m);const d=this.state.pinDescription.match(x)||[];d.length>0&&Object(S.a)(2,{element:10273,hashtags:JSON.stringify(d),objectId:this.props.pin.id});const u=a?()=>{}:()=>{p&&this.showBoardSavedToast(t,n),this.safeSetState({displaySuccessAnimation:!0,modalTitle:c.a._("Board created","Modal title after creating a new board","Modal title after creating a new board"),newPin:m,resolve:e})};"repin"===i?(this.fetchBoardRecommendation(m).then(e=>{this.showSuggestedBoardToast(e,m,n,o)}),o?u():e(m)):("create"===i&&l&&500840===l.experience_id&&(r({type:"PIN_CREATED_VIA_CREATOR_CHECKLIST",payload:{pin_created_via_creator_checklist:!0}}),Object(S.a)(7510,{component:13233})),o?u():e(m))}));if(o||r(Object(b.b)(d.id)),u(y),r(Object(I.d)(t)),r(Object(h.d)({boardId:t.id,sectionId:n&&n.id,increment:1})),f&&(r(Object(_.b)({userId:f,increment:1})),r(Object(g.d)())),n||!t.image_cover_url){const{image_url:e,images:n}=d;t.image_cover_url=e||n&&n["236x"]&&n["236x"].url||"",r(Object(I.e)({},t))}n&&r(Object(s.a)(n.id)),r(Object(v.a)(d.id,t.id,t.name,t.url,m.id))}),B(this,"handleSaveToBoard",(e,t,n)=>{const{boardPickerStopwatch:o,onToggleModal:i,shouldShowToast:r}=this.props;o&&o.abort("boardPickerSubmit"),r&&!n&&(this.close(),this.showBoardSavedToast(e,t));const s="secret"===(e.privacy||""),l={board:t?t.id:e.id,state:O.c.LOADING};this.safeSetState({boardSavedTo:l},()=>{this.getPinResource(s,e.id,(t||{}).id).callCreate({showError:!1}).then(o=>{this.safeSetState({boardSavedTo:Object.assign(l,{state:O.c.SUCCESS})},()=>this.handleBoardSaveSuccess(o,e,t,n)),i&&!n&&i(!1)}).catch(e=>{this.unmounted||this.safeSetState({boardSavedTo:null}),a.a.showError(e.message_detail||e.message);const t=this.makeCancelablePromise(Promise.reject(e));this.props.setCompletionPromise(t),i&&i(!1)})})}),B(this,"handleSocialConnectSet",(e,t)=>{const n=Object.assign({},this.state.sharing);e===p.a.FACEBOOK?n.facebook=t:e===p.a.TWITTER&&(n.twitter=t),this.safeSetState({sharing:n})}),B(this,"handleNewBoardAnimationCompletion",()=>{const{dispatch:e,pin:t}=this.props;e(Object(b.b)(t.id))})}UNSAFE_componentWillReceiveProps(e){const{boardWithSection:t,showCreate:n}=this.props;this.safeSetState({pinDescription:e.pin&&e.pin.description||e.description||""}),t&&n?this.setModalTitle(c.a._("Create section","modal title for create section pane","modal title for create section pane")):t&&!n&&this.setModalTitle(c.a._("Choose section","modal title for choose section","modal title for choose section"))}componentWillUnmount(){this.unmounted=!0}render(){const{close:e,dismissModal:t,handleNewBoardAnimationCompletion:n,handleSaveToBoard:o,handleSocialConnectSet:i,setModalTitle:r,updateDescription:a}=this,{boardSavedTo:s,displaySuccessAnimation:l,modalTitle:c,newPin:d}=this.state,{color:u,pin:p}=this.props;return this.props.children({boardSavedTo:s,color:u,dismissModal:t,displaySuccessAnimation:l,handleAbort:e,handleNewBoardAnimationCompletion:n,handleSaveToBoard:o,handleSocialConnectSet:i,modalTitle:c,newPin:d,pin:p,setModalTitle:r,updateDescription:a})}}const R=Object(m.compose)(Object(r.connect)(e=>{const{advertiser:t,viewer:n,history:o}=e,i=n.isAuth&&t&&t.owner_user_id!==n.id?t.id:null,r=e.experiences.eligibleExperiences[11],a=e.experiences.eligibleExperiences[33];return{homeTakeoverExperience:r,previousHistory:o.previous,repinTakeoverExperience:a,...i?{advertiser_id:i}:{},...n.isAuth?{viewerUserId:n.id}:{}}}),T.c,w.a)((function(e){const t=Object(E.b)();return i.a.createElement(k,Object.assign({},e,{boardPickerStopwatch:t}))}))},"mVx/":function(e,t,n){var o=n("XKAG")(n("JELi"));e.exports=o},pdBG:function(e,t,n){var o=n("AHhP"),i=n.n(o);const r=function(e,t){this.uid=e,this.item=t,this.next=null,this.prev=null},a=function(e){this._maxNumItems=e||10,this._uidToData={},this._numItems=0,this._firstData=null,this._lastData=null};a.prototype.set=function(e,t){let n=this._uidToData[e];n||(n=new r(e,t),this._uidToData[e]=n,this._numItems+=1),this._moveToFront(n),this._numItems>this._maxNumItems&&this._evict()},a.prototype.get=function(e){const t=this._uidToData[e];return t?(this._moveToFront(t),t.item):null},a.prototype.remove=function(e){const t=this._uidToData[e];t&&(delete this._uidToData[e],this._firstData===t&&(this._firstData=t.next),this._lastData===t&&(this._lastData=t.prev),t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),this._numItems-=1)},a.prototype._moveToFront=function(e){this._firstData!==e&&(this._firstData?(this._lastData===e&&(this._lastData=e.prev),e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),this._firstData.prev=e,e.next=this._firstData,e.prev=null,this._firstData=e):(this._firstData=e,this._lastData=e))},a.prototype._evict=function(){delete this._uidToData[this._lastData.uid],this._firstData===this._lastData?(this._firstData=null,this._lastData=null):(this._lastData=this._lastData.prev,this._lastData.next=null),this._numItems-=1};var s=a,l=n("eOdZ"),c=n("mBfy");const d=function(e){e=e||{},this.tags=e.tags,this.enable_recent_queries=!!e.enable_recent_queries,this.minimum_term_character_length=e.minimum_term_character_length||0,this.bypass_lru_cache=e.bypass_lru_cache;const t={tags:e.tags,pin:e.pin_id},n=e.num_places;n?t.num_places=n:t.count="count"in e?e.count:5,e.exclude_non_followers&&(t.exclude_non_followers=!0),e.field_set_key&&(t.field_set_key=e.field_set_key),e.pin_scope&&(t.pin_scope=e.pin_scope),e.suggestion_type&&(t.suggestion_type=e.suggestion_type);let o="TypeaheadResource";e.resource_name&&(o=e.resource_name),this.searchResource=l.a.create(o,t),this.itemsCache=new s};Object.assign(d.prototype,i.a),Object.assign(d.prototype,{search(e,t){let n;if(!e&&"pinners_and_contacts"===this.tags)return this.abortSearch(),this.publishData(e,[],{},t);if(!e&&c.default.isLimitedLogin())return this.abortSearch(),this.publishData(e,[],{},t);if(!e&&this.enable_recent_queries&&c.default&&c.default.isAuthenticated())n="recent_search";else{const n=this.bypass_lru_cache?{}:this.itemsCache.get(e);if(n){const o=n.items;if(o&&o.length){this.abortSearch();const i=n.hint;return void this.publishData(e,o,i,t)}}}e.length>=this.minimum_term_character_length?this.fetch(e,n,t):this.publishData(e,[],{},t)},getResource(){return this.searchResource},abortSearch(){this.getResource().abort()},publishData(e,t,n,o){const i={term:e,items:t,hint:n};this.trigger("data",i),o&&o(i)},setAutocompleteScope(e){this.getResource().set("autocompleteScope",e)},fetch(e,t,n){const o=this.getResource();if(o.isCalling()){const t=o.get("term");if(e===t)return;this.abortSearch()}""!==this.tags&&(o.set("term",e),o.set("tags",t||this.tags),o.resetBookmark(),o.callGet({showError:!1}).then(t=>{const o=t.resource_response.data,i=o.items,r=o.hint||{},a={hint:r,items:i};this.cacheData(e,a),this.publishData(e,i,r,n)},e=>{this.trigger("fetchError",e)}),this.warm=!0)},removeCacheForTerm(e){this.itemsCache.remove(e)},cacheData(e,t){this.itemsCache.set(e,t)},prefetch(){if(this.warm)return;l.a.create("TypeaheadPrepareResource").callGet({showError:!1}),this.warm=!0}});t.a=d},"ut/Y":function(e,t,n){var o=n("ZCpW"),i=n("GDhZ"),r=n("zZ0H"),a=n("Z0cm"),s=n("+c4W");e.exports=function(e){return"function"==typeof e?e:null==e?r:"object"==typeof e?a(e)?i(e[0],e[1]):o(e):s(e)}},uyxo:function(e,t,n){n.d(t,"a",(function(){return s}));var o=n("q1tI"),i=n.n(o),r=n("jHGc"),a=n("n6mq");function s(e){const{children:t,currentCarouselIndex:n,onDeleteSavedState:o,onEditSubmit:s,onToggleModal:l,pinId:c,variant:d,viewParameter:u}=e,p="pin"===d?{bgColor:"white",iconColor:"darkGray",size:"sm"}:{bgColor:"transparent",iconColor:"darkGray",size:"sm"};return i.a.createElement(a.d,{display:"flex",direction:"row",alignItems:"center",width:"closeup"===d?"100%":void 0,paddingX:"closeup"===d?2:void 0,marginStart:"pin"===d?-1:void 0,marginEnd:"pin"===d?-1:void 0},t&&i.a.createElement(a.d,{paddingX:1,"data-test-id":"saved-info",flex:"grow"},t),i.a.createElement(a.d,{paddingX:1,flex:"none",marginStart:"auto"},i.a.createElement(r.default,{component:0,onDelete:o,onSubmit:s,pinId:c,onToggleModal:l,viewParameter:u,carouselSlotCurrentIndex:n,style:p,useLegoStyles:"pin"===d})))}},vzKb:function(e,t,n){t.a=(e,t,n)=>{if(window.PerformanceObserver)try{const o=new window.PerformanceObserver(t);o.observe(e),window.addEventListener("beforeunload",()=>{o.disconnect()}),n&&window.addEventListener("popstate",()=>{n()})}catch(o){}}},xjIv:function(e,t,n){function o(e,t,n,o,i){return{type:"PIN_SAVE",payload:{pinId:e,boardId:t,title:n,url:o,localPinId:i}}}function i(e){return{type:"PIN_UNSAVE",payload:{pinId:e}}}n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}))},y2Ga:function(e,t,n){n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a}));var o=n("1dBE");const{Consumer:i,Provider:r,useHook:a}=Object(o.b)("pwtSurfaceContext")}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/js/PinBetterSaveCommon-8bce2b68a3617844e269.mjs.map